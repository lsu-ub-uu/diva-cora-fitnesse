---
Test
---
!contents -R2 -g -p -f -h
Kontrollera att rollerna har tillgång till rätt rättigheter för grundläggande Cora data.

!2 Tillgängliga roller:
 * SystemAdmin
 * DomainAdmin
 * Guest

!2 Guest
!define currentAuthToken {$guestToken}
#!define valid {null}

!3 Built-in metadata
!2 Listvariabel
!define recordType {metadataCollectionVariable}
Skapa en listavariabel (collectionVariable) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataCollectionVariableCollectionVar"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}],"name":"dataDivider"}]},{"name":"nameInData","value":"testWithThreeItems"},{"children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"someTestText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"someTestDefText"}],"name":"defTextId"},{"name":"refCollection","children":[{"name":"linkedRecordType","value":"metadataItemCollection"},{"name":"linkedRecordId","value":"yesNoCollection"}]}],"attributes":{"type":"collectionVariable"}} | | ${statusType} |

!define currentAuthToken {$guestToken}
*!
!***> Read collectionVariable

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | typeOfResourceCollectionVar | | ${statusType} |

*!
!***> Lista collectionVariable

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa collectionVariable

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testWithThreeItemsCollectionVar"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}],"name":"dataDivider"}]},{"name":"nameInData","value":"testWithThreeItems"},{"children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"someTestText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"someTestDefText"}],"name":"defTextId"},{"name":"refCollection","children":[{"name":"linkedRecordType","value":"metadataItemCollection"},{"name":"linkedRecordId","value":"yesNoCollection"}]}],"attributes":{"type":"collectionVariable"}} | | ${statusType} |

*!
!***> Uppdatera collectionVariable

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataCollectionVariableCollectionVar | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataCollectionVariableCollectionVar"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataCollectionVariable"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"coraUser:1299694997493014"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]},{"name":"tsCreated","value":"2021-03-03T14:08:08.517350Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"coraUser:1299694997493014"}]},{"name":"tsUpdated","value":"2021-03-03T14:08:08.517350Z"}],"repeatId":"0"}]},{"name":"nameInData","value":"testWithThreeItems"},{"name":"textId","children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"refCollection","children":[{"name":"linkedRecordType","value":"metadataItemCollection"},{"name":"linkedRecordId","value":"yesNoCollection"}]}],"attributes":{"type":"collectionVariable"}} | | ${statusType} |

*!
!***> Indexera collectionVariable

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataCollectionVariable"}],"name":"recordType"},{"name":"recordId","value":"testMetadataCollectionVariableCollectionVar"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök collectionVariable

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | metadataSearch | {"name":"metadataSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"testMetadataCollectionVariableCollectionVar"}]}]}]} | | ${statusType} |

*!
!***> Delete collectionVariable

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationCollectionVar | testMetadataOutputPCollVar | | ${statusType} |
| ${currentAuthToken} | presentationCollectionVar | testMetadataPCollVar | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataCollectionVariableCollectionVar | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationCollectionVar | testMetadataOutputPCollVar | | ${statusType} |
| ${currentAuthToken} | presentationCollectionVar | testMetadataPCollVar | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataCollectionVariableCollectionVar | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

!define currentAuthToken {$guestToken}
*!
!2 Textvariabel
!define recordType {metadataTextVariable}
Skapa en textvariabel (metadataTextVariable) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataTextVariableTextVar"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataTextVariableT"},{"name":"regEx","value":"+*"},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]}],"attributes":{"type":"textVariable"}} | | ${statusType} |

*!
!define currentAuthToken {$guestToken}
!***> Läs textvariabel

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | metadataIdTextVar | | ${statusType} |

*!
!***> Lista textvariabel

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa textvariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testOtherMetadataTextVariableTextVar"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataTextVariableT"},{"name":"regEx","value":"+*"},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]}],"attributes":{"type":"textVariable"}} | | ${statusType} |

*!
!***> Uppdatera textvariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataTextVariableTextVar | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataTextVariableTextVar"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataTextVariable"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}]},{"name":"tsUpdated","value":"2017-11-01T17:54:13.000000Z"}],"repeatId":"0"}]},{"name":"nameInData","value":"metadataId"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"regEx","value":"(^[0-9A-Za-z:-_]{2,50}$)"}],"attributes":{"type":"textVariable"}} | | ${statusType} |

*!
!***> Indexera textvariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataTextVariable"}],"name":"recordType"},{"name":"recordId","value":"testMetadataTextVariableTextVar"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök textvariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | metadataSearch | {"name":"metadataSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"testMetadataTextVariableTextVar"}]}]}]} | | ${statusType} |

*!
!***> Ta bort textvariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationVar | testMetadataOutputPVar | | ${statusType} |
| ${currentAuthToken} | presentationVar | testMetadataPVar | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataTextVariableTextVar | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationVar | testMetadataOutputPVar | | ${statusType} |
| ${currentAuthToken} | presentationVar | testMetadataPVar | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataTextVariableTextVar | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!2 Nummervariabel
!define recordType {metadataNumberVariable}
Skapa en nummervariabel (metadataNumberVariable) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataNumberVarNumberVar"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataNumberVar"},{"name":"min","value":"0"},{"name":"max","value":"5"},{"name":"warningMin","value":"0"},{"name":"warningMax","value":"5"},{"name":"numberOfDecimals","value":"0"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"numberVariable"}} | | ${statusType} |

*!
!define currentAuthToken {$guestToken}
!***> Läs nummervariabel

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataNumberVarNumberVar | | ${statusType} |

*!
!***> Lista nummervariabel

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa nummervariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testOtherMetadataNumberVarNumberVar"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataNumberVar"},{"name":"min","value":"0"},{"name":"max","value":"5"},{"name":"warningMin","value":"0"},{"name":"warningMax","value":"5"},{"name":"numberOfDecimals","value":"0"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"numberVariable"}} | | ${statusType} |

*!
!***> Uppdatera nummervariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataTextVariableTextVar | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataNumberVarNumberVar"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataNumberVariable"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}]},{"name":"tsCreated","value":"2018-11-30T14:10:24.119000Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}]},{"name":"tsUpdated","value":"2018-11-30T14:10:24.119000Z"}],"repeatId":"0"}]},{"name":"nameInData","value":"keeptHis"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"min","value":"0"},{"name":"max","value":"20"},{"name":"warningMin","value":"2"},{"name":"warningMax","value":"10"},{"name":"numberOfDecimals","value":"0"}],"attributes":{"type":"numberVariable"}} | | ${statusType} |

*!
!***> Indexera nummervariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataNumberVariable"}],"name":"recordType"},{"name":"recordId","value":"testMetadataNumberVarNumberVar"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök nummervariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | metadataSearch | {"name":"metadataSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"testMetadataNumberVarNumberVar"}]}]}]} | | ${statusType} |

*!
!***> Ta bort nummervariabel

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationNumberVar | testMetadataOutputPNumVar | | ${statusType} |
| ${currentAuthToken} | presentationNumberVar | testMetadataPNUmVar | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataNumberVarNumberVar | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationNumberVar | testMetadataOutputPNumVar | | ${statusType} |
| ${currentAuthToken} | presentationNumberVar | testMetadataPNumVar | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataNumberVarNumberVar | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!2 Länk
!define recordType {metadataRecordLink}
Skapa en metadatalänk (metadataRecordLink) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataLinkRecordLink"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataLink"},{"name":"linkedRecordType","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"coraText"}]},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"recordLink"}} | | ${statusType} |

*!
!define currentAuthToken {$guestToken}
!***> Läs metadatalänk

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataLinkRecordLink | | ${statusType} |

*!
!***> Lista metadatalänk

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa metadatalänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testOtherMetadataLinkRecordLink"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataLink"},{"name":"linkedRecordType","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"coraText"}]},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"recordLink"}} | | ${statusType} |

*!
!***> Uppdatera metadatalänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataLinkRecordLink | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataLinkRecordLink"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataRecordLink"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"141414"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}]},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"141414"}]},{"name":"tsUpdated","value":"2017-11-01T17:49:58.000000Z"}],"repeatId":"0"}]},{"name":"nameInData","value":"presentedRecordType"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"linkedRecordType","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"recordType"}]}],"attributes":{"type":"recordLink"}} | | ${statusType} |

*!
!***> Indexera metadatalänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataRecordLink"}],"name":"recordType"},{"name":"recordId","value":"testMetadataLinkRecordLink"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök metadatalänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | metadataSearch | {"name":"metadataSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"testMetadataNumberVarNumberVar"}]}]}]} | | ${statusType} |

*!
!***> Ta bort metadatalänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationRecordLink | testMetadataOutputPLink | | ${statusType} |
| ${currentAuthToken} | presentationRecordLink | testMetadataLinkRecordPLink | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataLinkRecordLink | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | presentationRecordLink | testMetadataOutputPLink | | ${statusType} |
| ${currentAuthToken} | presentationRecordLink | testMetadataLinkRecordPLink | | ${statusType} |
| ${currentAuthToken} | ${recordType} | testMetadataLinkRecordLink | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!2 Resurslänk
!define recordType {metadataResourceLink}
Skapa en resurslänk (metadataResourceLink) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | coraText | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"someTestText"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"textPart","children":[{"name":"text","value":"En text"}],"attributes":{"type":"default","lang":"sv"}}]} | | ${statusType} |
| ${currentAuthToken} | coraText | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"someTestDefText"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"textPart","children":[{"name":"text","value":"En def text"}],"attributes":{"type":"default","lang":"sv"}}]} | | ${statusType} |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataResourceLinkResLink"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataResourceLink"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"resourceLink"}} | | ${statusType} |

*!
!define currentAuthToken {$guestToken}
!***> Läs resurslänk

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataResourceLinkResLink | | ${statusType} |

*!
!***> Lista resurslänk

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testOtherMetadataResourceLinkResLink"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataResourceLink"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"resourceLink"}} | | ${statusType} |

*!
!***> Uppdatera resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataResourceLinkResLink | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataResourceLinkResLink"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataResourceLink"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}]},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}]},{"name":"tsUpdated","value":"2017-11-01T17:49:57.000000Z"}],"repeatId":"0"}]},{"name":"nameInData","value":"testMetadataResourceLink"},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]}],"attributes":{"type":"resourceLink"}} | | ${statusType} |

*!
!***> Indexera resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataResourceLink"}],"name":"recordType"},{"name":"recordId","value":"testMetadataResourceLinkResLink"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | metadataSearch | {"name":"metadataSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"testMetadataResourceLinkResLink"}]}]}]} | | ${statusType} |

*!
!***> Ta bort resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataResourceLinkResLink | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataResourceLinkResLink | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!2 Metadatagrupp
!define recordType {metadataGroup}
Skapa en metadatagrupp (metadataGroup) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | metadataTextVariable | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataTextVariableTextVar"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataTextVariableT"},{"name":"regEx","value":"+*"},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestDefText"}]},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someTestText"}]}],"attributes":{"type":"textVariable"}} | | ${statusType} |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataGroupGroup"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataGroup"},{"name":"childReferences","children":[{"name":"childReference","children":[{"name":"repeatMin","value":"0"},{"name":"repeatMax","value":"1"},{"name":"ref","children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"testMetadataTextVariableTextVar"}]}],"repeatId":"0"}]},{"name":"excludePGroupCreation","value":"true"}],"attributes":{"type":"group"}} | | ${statusType} |

*!
!define currentAuthToken {$guestToken}
!***> Läs metadatagrupp

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataGroupGroup | | ${statusType} |

*!
!***> Lista metadatagrupp

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa metadatagrupp

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testOtherMetadataGroupGroup"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"nameInData","value":"testMetadataGroup"},{"name":"childReferences","children":[{"name":"childReference","children":[{"name":"repeatMin","value":"0"},{"name":"repeatMax","value":"1"},{"name":"ref","children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"testMetadataTextVariableTextVar"}]}],"repeatId":"0"}]},{"name":"excludePGroupCreation","value":"true"}],"attributes":{"type":"group"}} | | ${statusType} |

*!
!***> Uppdatera metadatagrupp

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataGroupGroup | {"name":"metadata","children":[{"name":"recordInfo","children":[{"name":"id","value":"testMetadataGroupGroup"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataGroup"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"141414"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"141414"}]},{"name":"tsUpdated","value":"2017-11-01T17:46:48.000000Z"}],"repeatId":"0"}]},{"name":"nameInData","value":"testMetadataGroup"},{"name":"childReferences","children":[{"name":"childReference","children":[{"name":"repeatMin","value":"0"},{"name":"repeatMax","value":"1"},{"name":"ref","children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"testMetadataTextVariableTextVar"}]}],"repeatId":"0"}]},{"name":"excludePGroupCreation","value":"true"}],"attributes":{"type":"group"}} | | ${statusType} |

*!
!***> Indexera metadatagrupp

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"metadataGroup"}],"name":"recordType"},{"name":"recordId","value":"testMetadataGroupGroup"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök metadatagrupp

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | metadataSearch | {"name":"metadataSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"testMetadataGroupGroup"}]}]}]} | | ${statusType} |

*!
!***> Ta bort metadatagrupp

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataGroupGroup | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | testMetadataGroupGroup | | ${statusType} |
| ${currentAuthToken} | presentationVar | testMetadataOutputPVar | | ${statusType} |
| ${currentAuthToken} | presentationVar | testMetadataPVar | | ${statusType} |
| ${currentAuthToken} | metadataTextVariable | testMetadataTextVariableTextVar | | ${statusType} |
| ${currentAuthToken} | coraText | someTestText | | ${statusType} |
| ${currentAuthToken} | coraText | someTestDefText | | ${statusType} |

*!
!2 Text
!define recordType {coraText}
Skapa en text (coraText) som sedan ska användas i testerna.

!***> setUp

!define currentAuthToken {$adminAuthToken}
!define statusType {CREATED}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"someTestText"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"textPart","children":[{"name":"text","value":"En text"}],"attributes":{"type":"default","lang":"sv"}}]} | | ${statusType} |

*!
!define currentAuthToken {$guestToken}
!***> Läs text

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | someTestText | | ${statusType} |

*!
!***> Lista texter

!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | testReadRecordList? | getStatusType? |
| ${currentAuthToken} | ${recordType} | | ${statusType} |

*!
!***> Skapa text

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"someOtherTestText"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]}]},{"name":"textPart","children":[{"name":"text","value":"En text"}],"attributes":{"type":"default","lang":"sv"}}]} | | ${statusType} |

*!
!***> Uppdatera text

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | someTestText | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"someTestText"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"coraText"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"141414"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"divaTestSystem"}]},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"141414"}]},{"name":"tsUpdated","value":"2017-11-01T17:46:48.000000Z"}],"repeatId":"0"}]},{"name":"textPart","children":[{"name":"text","value":"En text"}],"attributes":{"type":"default","lang":"sv"}}]} | | ${statusType} |

*!
!***> Indexera text

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| ${currentAuthToken} | workOrder | {"children":[{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"coraText"}],"name":"recordType"},{"name":"recordId","value":"someTestText"},{"name":"type","value":"index"}],"name":"workOrder"} | | ${statusType} |

*!
!***> Sök resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | searchId | json | testSearchRecord? | getStatusType? |
| ${currentAuthToken} | textSearch | {"name":"textSearch","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"someTestText"}]}]}]} | | ${statusType} |

*!
!***> Ta bort resurslänk

!define statusType {FORBIDDEN}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | someTestText | | ${statusType} |

*!
!***> Återställ

!define currentAuthToken {$adminAuthToken}
!define statusType {OK}
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | ${recordType} | someTestText | | ${statusType} |

*!
Metadata Group!-
-!Medatada Number Variable!-
-!Metadata Text Variable!-
-!Record Link!-
-!Record Link Abstract

!3 Pre-defined metadata
AppTokenBinaryCollectTermIdLoginLoginUnit!-
-!Metadata Record LinkPermissionRecordInfoRecordTypeSearchSearchTermSystemSystemOneUserTextUserWorkOrder

!2 Typ av rättigheter:
 * read
 * list
 * create
 * update
 * search
 * index
 * delete
