---
Help: Data for personDomainPart authority-person:125:uu
---
!***> Data för personDomainPart authority-person:125:uu
Detta är en personDomainPart för domän uu, med tre lokala id:n

!-RecordId är authority-person:125:uu-!
!define recordId {authority-person:125:uu}

Inkludera recordType personDomainPart eftersom detta är en personDomainPart
!include -seamless .TheDiVATests.DivaTests.Authority.Person.data.dataPersonDomainPartRecordType

#!define createData {!--!}

Definiera hur datat skall se ut när posten är skapad / läses första gången
!define expectedCreatedData {!-{"children":[{"children":[{"name":"id","value":"authority-person:125:uu"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"personDomainPart"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"createdBy"},{"name":"tsCreated","value":"2021-03-24T09:34:26.374000Z"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"diva"}],"name":"dataDivider"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2021-03-24T09:34:50.977000Z"}],"name":"updated"},{"name":"domain","value":"uu"}],"name":"recordInfo"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"organisation"},{"name":"linkedRecordId","value":"1750"}],"name":"organisationLink"},{"name":"affiliationFromYear","value":"1730"},{"name":"affiliationUntilYear","value":"1744"}],"name":"affiliation"},{"name":"identifier","value":"local0"},{"name":"identifier","value":"local1"},{"name":"identifier","value":"local2",}],"name":"personDomainPart"}-!}

Definiera förändrat data, lagt till temp identifier, 
!define updateData {!-{"children":[{"children":[{"name":"id","value":"authority-person:125:uu"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"personDomainPart"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"createdBy"},{"name":"tsCreated","value":"2021-03-24T09:34:26.374000Z"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"diva"}],"name":"dataDivider"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2021-03-24T09:34:50.977000Z"}],"name":"updated"},{"name":"domain","value":"uu"},{"name":"public","value":"yes"}],"name":"recordInfo"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"organisation"},{"name":"linkedRecordId","value":"1455"}],"name":"organisationLink"},{"name":"affiliationFromYear","value":"1731"},{"name":"affiliationUntilYear","value":"1741"}],"name":"affiliation"},{"repeatId":"0","name":"identifier","value":"local0"},{"repeatId":"1","name":"identifier","value":"local1"},{"repeatId":"2","name":"identifier","value":"local2"}],"name":"personDomainPart"}-!}

Definierar expectedUpdatedData, samma som updateData men utan repeatId för idenitifikatorer (eftersom det ändras)
!define expectedUpdatedData {!-{"children":[{"children":[{"name":"id","value":"authority-person:125:uu"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"personDomainPart"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"createdBy"},{"name":"tsCreated","value":"2021-03-24T09:34:26.374000Z"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"diva"}],"name":"dataDivider"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2021-03-24T09:34:50.977000Z"}],"name":"updated"},{"name":"domain","value":"uu"},{"name":"public","value":"yes"}],"name":"recordInfo"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"organisation"},{"name":"linkedRecordId","value":"1455"}],"name":"organisationLink"},{"name":"affiliationFromYear","value":"1731"},{"name":"affiliationUntilYear","value":"1741"}],"name":"affiliation"},{"name":"identifier","value":"local0"},{"name":"identifier","value":"local1"},{"name":"identifier","value":"local2"},{"repeatId":"$tempLocalId","name":"identifier","value":"$tempLocalId"}],"name":"personDomainPart"}-!}

Definiera hur datat skall se ut när posten uppdateras och vi har tagit bort ett lokaltId (lokalid2)
!define updateDataRemoveLocalId {!-{"children":[{"children":[{"name":"id","value":"authority-person:125:uu"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"personDomainPart"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"createdBy"},{"name":"tsCreated","value":"2021-03-24T09:34:26.374000Z"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"diva"}],"name":"dataDivider"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2021-03-24T09:34:50.977000Z"}],"name":"updated"},{"name":"domain","value":"uu"},{"name":"public","value":"yes"}],"name":"recordInfo"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"organisation"},{"name":"linkedRecordId","value":"1750"}],"name":"organisationLink"},{"name":"affiliationFromYear","value":"1730"},{"name":"affiliationUntilYear","value":"1744"}],"name":"affiliation"},{"repeatId":"0","name":"identifier","value":"local0"},{"repeatId":"1","name":"identifier","value":"local1"}],"name":"personDomainPart"}-!}

Definiera hur datat skall se ut när posten uppdateras och vi har ändrat ett lokaltId (lokalid1)
!define updateChangeLocalIdData {!-{"children":[{"children":[{"name":"id","value":"authority-person:125:uu"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"personDomainPart"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"createdBy"},{"name":"tsCreated","value":"2021-03-24T09:34:26.374000Z"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"diva"}],"name":"dataDivider"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"rinst123"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2021-03-24T09:34:50.977000Z"}],"name":"updated"},{"name":"domain","value":"uu"},{"name":"public","value":"yes"}],"name":"recordInfo"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"organisation"},{"name":"linkedRecordId","value":"1750"}],"name":"organisationLink"},{"name":"affiliationFromYear","value":"1730"},{"name":"affiliationUntilYear","value":"1744"}],"name":"affiliation"},{"repeatId":"0","name":"identifier","value":"local0"},{"repeatId":"1","name":"identifier","value":"changedValue"},{"repeatId":"2","name":"identifier","value":"local2"} ],"name":"personDomainPart"}-!}

#!define originalData {!--!}
#!define expectedOriginalData originalData
!define expectedOriginalData expectedCreatedData
 
#!define searchId {testWorkoutExtendedSearch}
#!define searchQueryData {!-{"name":"searchTestWorkoutExtended","children":[{"name":"include","children":[{"name":"includePart","children":[{"name":"recordIdSearchTerm","value":"cirkelfys1"}]}]}]}-!}

# customUpdateData is a json string which can be filled with extra json using the variable customJsonPart
#!define jsonPart customJsonPart
#!define customJsonPart {}
#!define customUpdateData {!-{"name":"organisation","children":[{"name":"recordInfo","children":[{"name":"id","value":"1455"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"subOrganisation"}]},{"name":"createdBy","children":[{"name":"linkedRecordType","value":"coraUser"},{"name":"linkedRecordId","value":"coraUser:4412982402853626"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"diva"}]},{"name":"tsCreated","value":"2017-01-01T00:00:00.000000Z"},{"name":"updated","children":[{"name":"updatedBy","children":[{"name":"linkedRecordType","value":"coraUser"},{"name":"linkedRecordId","value":"coraUser:4412982402853626"}]},{"name":"tsUpdated","value":"2017-01-01T00:00:00.000000Z"}],"repeatId":"0"},{"name":"selectable","value":"yes"}]},{"name":"organisationName","children":[{"name":"name","value":"Teologiska fakulteten"},{"name":"language","value":"sv"}]},{"name":"organisationAlternativeName","children":[{"name":"name","value":"Teologiska fakulteten"},{"name":"language","value":"en"}]},{"name":"domain","value":"uu"},{"name":"URL","value":"http://somethingelse.se/"},{"name":"organisationType","value":"university"}-!${jsonPart}!-]}-!}
*!
