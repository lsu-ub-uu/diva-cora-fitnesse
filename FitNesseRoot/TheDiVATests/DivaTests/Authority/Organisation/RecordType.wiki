---
Test
---
!2 Metadata
!4 Fält och begränsningar:

 * organisation(group)
   * recordInfo(group, 1-1, '''noRestrictions''')
   * organisationName(textVar, 1-1, '''noRestrictions''')
   * alternativeName(group, 1-1, '''noRestrictions''') 
   * box (textVar, 0-1, '''noRestrictions ''')
   * street (textVar, 0-1, '''noRestrictions ''')
   * postcode (textVar, 0-1, '''noRestrictions ''')
   * city (textVar, 0-1, '''noRestrictions ''')
   * country (colVar, 0-1, '''noRestrictions ''')
   * URL (textVar, 0-1, '''noRestrictions ''')
   * organisationType (colVar, 0-1, '''noRestrictions ''')
   * organisationCode (textVar, 0-1, '''noRestrictions ''')
   * organisationNumber (textVar, 0-1, '''noRestrictions ''')
   * eligible (colVar, 1-1, '''noRestrictions ''')
   * parentOrganisation (group, 0-X, '''noRestrictions ''')
   * formerName (group, 0-X, '''noRestrictions ''')
   * closedDate (textVar, 0-1, '''noRestrictions ''')
   * domain (colVar, 1-1, '''write ''')
   * librisId (textVar, 0-1, '''write ''')
   * showInDefence (colVar, 0-1, '''readWrite ''')
   * topLevel (colVar, 0-1, '''readWrite ''')
   * showInPortal (colVar, 0-1, '''readWrite ''')
   * rootOrganisation (colVar, 0-1, '''readWrite''') 

!4 Interna beroenden inom posten:
  * Organisation har ett internt beroende mellan rootOrganisation och organisationType. Om rootOrganisation är ja, skall organisationType sättas till 49 (root) i databasen, men inte vara med när man läser posten (motsvarande tomt värde).


Läs recordType för organisation via  REST API.

!***> Läs posttyp Organisation

!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| $adminAuthToken | recordType | divaOrganisation | | OK |

*!
Läs topnivå metadatagruppen för en '''ny''' organisation, och kontrollera att den har rätt barn

!***> Kontrollera barnen till  divaOrganisationNewGroup

Läs in metadatagruppen för senare kontroll

!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | divaOrganisationNewGroup | |

Kontrollera barnen

!| MetadataLinkFixture |
| linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getRecordPartConstraint? |
| metadataGroup | recordInfoDivaAutogeneratedNewGroup | 1 | 1 | noRestrictions |
| metadataGroup | divaOrganisationNameGroup | 1 | 1 | noRestrictions |
| metadataGroup | divaOrganisationAlternativeNameGroup | 1 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationBoxTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationStreetTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationPostcodeTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationCityTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | divaOrganisationCountryCollectionVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationURLTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | divaOrganisationOrgTypeCollectionVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationOrgCodeTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationOrgNumberTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | divaOrganisationEligibleCollectionVar | 1 | 1 | noRestrictions |
| metadataGroup | divaOrganisationParentOrgGroup | 0 | X | noRestrictions |
| metadataGroup | divaOrganisationFormerNameGroup | 0 | X | noRestrictions |
| metadataTextVariable | divaOrganisationClosedTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | domainCollectionVar | 1 | 1 | |
| metadataTextVariable | organisationLibrisIdTextVar | 0 | 1 | |
| metadataCollectionVariable | showInDefenceCollectionVar | 0 | 1 | |
| metadataCollectionVariable | topLevelCollectionVar | 0 | 1 | |
| metadataCollectionVariable | showInPortalCollectionVar | 0 | 1 | |
| metadataCollectionVariable | rootOrganisationCollectionVar | 0 | 1 | |

*!
Läs topnivå metadatagruppen för en '''befintlig''' organisation, och kontrollera att den har rätt barn

!***> Kontrollera barnen till divaOrganisationGroup

Läs in metadatagruppen för senare kontroll

!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | divaOrganisationGroup | |

Kontrollera barnen

!| MetadataLinkFixture |
| linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getRecordPartConstraint? |
| metadataGroup | recordInfoDivaGroup | 1 | 1 | noRestrictions |
| metadataGroup | divaOrganisationNameGroup | 1 | 1 | noRestrictions |
| metadataGroup | divaOrganisationAlternativeNameGroup | 1 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationBoxTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationStreetTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationPostcodeTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationCityTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | divaOrganisationCountryCollectionVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationURLTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | divaOrganisationOrgTypeCollectionVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationOrgCodeTextVar | 0 | 1 | noRestrictions |
| metadataTextVariable | divaOrganisationOrgNumberTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | divaOrganisationEligibleCollectionVar | 1 | 1 | noRestrictions |
| metadataGroup | divaOrganisationParentOrgGroup | 0 | X | noRestrictions |
| metadataGroup | divaOrganisationFormerNameGroup | 0 | X | noRestrictions |
| metadataTextVariable | divaOrganisationClosedTextVar | 0 | 1 | noRestrictions |
| metadataCollectionVariable | domainCollectionVar | 1 | 1 | write |
| metadataTextVariable | organisationLibrisIdTextVar | 0 | 1 | write |
| metadataCollectionVariable | showInDefenceCollectionVar | 0 | 1 | readWrite |
| metadataCollectionVariable | topLevelCollectionVar | 0 | 1 | readWrite |
| metadataCollectionVariable | showInPortalCollectionVar | 0 | 1 | readWrite |
| metadataCollectionVariable | rootOrganisationCollectionVar | 0 | 1 | readWrite |

*!
